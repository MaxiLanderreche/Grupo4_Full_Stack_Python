<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contacto</title>
    <!--Bootstrap links CDN-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
        integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
        crossorigin="anonymous"></script>
    <!--Iconos footer-->
    <script src="https://kit.fontawesome.com/e15e8c34af.js" crossorigin="anonymous"></script>
    <!--Estilo-->
    <link rel="stylesheet" href="principal.css">
    <link href="https://fonts.googleapis.com/css2?family=Libre+Baskerville&display=swap" rel="stylesheet">
</head>

<body class="body">
   
    <header id="header">
    </header>
    
    <nav class="navegador">
        <div class="navegador_items">
            <div class="Gallery_Browse"><a href="carousel.html">Gallery Browse</a></div>
            <div class="Lastest_Works"><a href="latestworks.html">Lastest Works</a></div>
            <div class="Contact"><a href="contacto.html">Contact</a></div>
        </div>
    </nav>


<script>
        //const queryString = window.location.search; 
        //console.log(queryString);    
    var getUrlParameter = function getUrlParameter(sParam) {
    var sPageURL = window.location.search.substring(1),
        sURLVariables = sPageURL.split('&'),
        sParameterName,
        i;

    for (i = 0; i < sURLVariables.length; i++) {
        sParameterName = sURLVariables[i].split('=');

        if (sParameterName[0] === sParam) {
            return sParameterName[1] === undefined ? true : decodeURIComponent(sParameterName[1]);
        }
    }
    return false; 
  };
  var name = getUrlParameter('name');
  console.log(name);
  //document.body.innerHTML = document.body.innerHTML.replace('subject', 'hi');


</script>

    <!--Boostrap formulario-->
        <div class="principal_formulario">
        <form class="formulario" action="https://formspree.io/f/mrgdklpe" method="POST">
            <h1 class="H1_contacto">Contact us</h1>
            <div class="mb-3 form">
                <label for="exampleFormControlInput1" class="form-label">
                    <h2 class="H2_contacto">Name</h2>
                </label>
                <input type="text" class="form-control" name="name" placeholder="Name Last name" required>
            </div>
            <div class="mb-3 form">
                <label for="exampleFormControlInput1" class="form-label">
                    <H2 class="H2_contacto">Email address</H2>
                </label>
                <input type="email" class="form-control" name="email" placeholder="name@example.com">
            </div>
            <div class="mb-3 form">
                <label for="exampleFormControlInput1" class="form-label">
                    <H2 class="H2_contacto">Subject or Artwork id</H2>
                </label>
                
                <input id="preFill" type="text" class="form-control" name = "subject" placeholder = "Subject" value="name" required>
              <script>

                    document.querySelector('#preFill').value = name;
                    if(name == 'false') {
                        document.querySelector('#preFill').value = "";
                        //console.log("false");
                       }
                    
              </script>   
            
            </div>



            <div class="mb-3 form">
                <label for="exampleFormControlTextarea1" class="form-label">
                    <H2 class="H2_contacto">Comments</H2>
                </label>
                <textarea class="form-control" name="coments" rows="3"
                    placeholder="Please mention your interest in our artwork. "></textarea>
            </div>
        
            <button type="submit" class="btn btn-primary mb-3">
                <H3 class="H3_contacto">Submit</H3>
            </button>

            <div class="mb-3 form">
            <button type="quoteShipment" class="btn btn-primary mb-3">
                <H3 id="quoteButton" onclick="quoteMe()" class="H3_contacto">Quote your shipment</H3>
            </button>
            </div>


        </form>

        <!--JS para manejar el submit del formulario-->
        <script>


            //Va a buscar al html el elemento con la clase formulario
            const $form = document.querySelector(".formulario")
            console.log($form)

            //Le agrega al formulario una escucha de eventos y cuando sucede el evento, llama a la funcion handleSubmit 
            $form.addEventListener('submit', handleSubmit)

            //define la funcion handleSubmit con ejecucion asincronica (una cosa a la vez y en paralelo)
            async function handleSubmit(event) {
                event.preventDefault() // Evita que el navegador haga la logica default 
                const form = new FormData(this) //Vuelve a reconstruir el objeto FormData (clave/valor). This=formulario
                const response = await fetch(this.action, {
                    method: this.method,
                    body: form,
                    headers: {
                        'Accept': 'application/json'
                    }
                }) // Aca busca la accion y el metodo del html definido en el form, como cuerpo define los datos del formulario y como header pone que la respuesta sea en formato json
                if (response.ok) {
                    this.reset()
                    alert('Thanks for your interest in AlveArt gallery. We will contact you as soon as possible. Have a nice day!')
                }// Si se envia el formulario sale la alerta y se limpia el formulario.

            }
            
 

        </script>

    <div class="location"> 
        <div id="location_info">
            <h1 class="H1_contacto">Our location</h1>
            <h5>Alveart gallery</h5>
            <p>Av. Alvear 1883 <br> Lu - Vie (10 a 16 hs)</p>
        </div>
        <div id="map">
            <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3284.647191385306!2d-58.39089008499153!3d-34.58779268046368!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x95bccaa49d127055%3A0xf9a829dab5299a03!2sAv.%20Alvear%201883%20loc%2031%2C%20C1129%20CABA!5e0!3m2!1ses-419!2sar!4v1665864134072!5m2!1ses-419!2sar" width="400" height="300" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
        </div>
    </div>

    </div>
   
    <footer id="footer">
    </footer>
    <script src="main.js"></script>

</body>

</html>
